/* --- FONT IMPORT --- */
	@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

	/* --- CSS VARIABLES (COLOR PALETTE & SIZING) --- */
	:root {
		/* Light Mode Colors */
		--font-family-sans: 'Inter', sans-serif;
		--color-primary: #4A5568;     /* Slate 600 */
		--color-primary-hover: #2D3748; /* Slate 800 */
		--color-secondary: #0d9488;    /* Teal 600 */
		--color-secondary-hover: #0f766e; /* Teal 700 */

		--color-background: #F8FAFC; /* Slate 50 */
		--color-surface: #FFFFFF;    /* White */
		--color-border: #E2E8F0;     /* Slate 200 */
		--color-table-header-bg: #F9FAFB;

		--color-text-primary: #1E293B;  /* Slate 800 */
		--color-text-secondary: #64748B;/* Slate 500 */
		--color-text-white: #FFFFFF;

		/* Status Colors */
		--color-success: #16A34A;
		--color-success-bg: #F0FDF4;
		--color-warning: #D97706;
		--color-warning-bg: #FFFBEB;
		--color-danger: #DC2626;
		--color-danger-bg: #FEF2F2;
		--color-info: #3B82F6;
		--color-info-bg: #EFF6FF;

		--shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
		--shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
		--shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
		--border-radius: 0.5rem;
	}

	/* Dark Mode Colors */
	[data-theme="dark"] {
		--color-primary: #94A3B8;
		--color-primary-hover: #64748B;
		--color-secondary: #14B8A6;
		--color-secondary-hover: #0D9488;

		--color-background: #0F172A; /* Slate 900 */
		--color-surface: #1E293B;    /* Slate 800 */
		--color-border: #334155;     /* Slate 700 */
		--color-table-header-bg: #111827;

		--color-text-primary: #F8FAFC; /* Slate 50 */
		--color-text-secondary: #94A3B8;/* Slate 400 */
		--color-text-white: #1E293B;
		
		--color-success-bg: #064E3B;
		--color-warning-bg: #78350F;
		--color-danger-bg: #7F1D1D;
		--color-info-bg: #1E40AF;
	}
	
	/* --- FMG Logo Style --- */
	.logo-fmg {
		position: absolute;
		top: 0.75rem; /* Aligned top with theme switcher */
		left: 50%; /* Centered horizontally */
		transform: translateX(-50%); /* Fine-tune centering */
		font-family: var(--font-family-sans);
		font-size: 1.75rem; /* Increased font size */
		font-weight: 700;
		color: #FF8C00;
		letter-spacing: 0.05em;
		text-transform: uppercase;
		z-index: 10;
	}

	@media (max-width: 768px) {
		.logo-fmg {
			position: static;
			display: block;
			text-align: center;
			margin-top: 1rem;
		}
	}

	/* --- Theme Switcher Button --- */
	.theme-switcher {
		display: flex;
		align-items: center;
		gap: 0.5rem;
		padding: 0.5rem 1rem;
		border-radius: var(--border-radius);
		background-color: var(--color-primary);
		color: var(--color-text-white);
		border: none;
		cursor: pointer;
		box-shadow: var(--shadow-sm);
		transition: background-color 0.3s, color 0.3s;
		position: absolute;
		top: 0.5rem; 
		right: 2.5rem; /* Aligned with main container padding */
	}

	.theme-switcher:hover {
		background-color: var(--color-primary-hover);
	}

	.theme-switcher svg {
		width: 20px;
		height: 20px;
		color: var(--color-text-white);
	}

	.theme-switcher .theme-label {
		font-weight: 600;
	}

	[data-theme="dark"] .theme-switcher {
		background-color: var(--color-surface);
		color: var(--color-text-primary);
		border: 1px solid var(--color-border);
	}

	[data-theme="dark"] .theme-switcher:hover {
		background-color: var(--color-background);
	}
	[data-theme="dark"] .theme-switcher svg {
		color: var(--color-text-primary);
	}

	/* --- GENERAL STYLES & RESETS --- */
	*, *::before, *::after {
		box-sizing: border-box;
		margin: 0;
		padding: 0;
	}

	html {
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
	}
	
	body {
		font-family: var(--font-family-sans);
		background-color: var(--color-background);
		color: var(--color-text-primary);
		padding: 2rem;
		transition: background-color 0.3s, color 0.3s;
	}

	/* --- LAYOUT CONTAINERS --- */
	.main-container {
		width: 100%;
		max-width: 1600px; /* Increased max-width */
		margin: 0 auto;
		background-color: var(--color-surface);
		border-radius: var(--border-radius);
		box-shadow: var(--shadow-lg);
		padding: 2.5rem;
		position: relative;
		transition: background-color 0.3s;
	}

	.header-title-wrapper {
		text-align: center;
		margin-bottom: 2.5rem;
		background-color: var(--color-primary);
		padding: 1.5rem;
		border-radius: var(--border-radius);
		position: relative;
		margin-top: 1.5rem;
		transition: background-color 0.3s;
	}

	h1 {
		font-size: 2.25rem;
		font-weight: 700;
		color: var(--color-text-white);
		line-height: 1.2;
		transition: color 0.3s;
	}

	.documents-section {
		border: 1px solid var(--color-border);
		border-radius: var(--border-radius);
		padding: 2rem;
		margin-bottom: 2rem;
		transition: border-color 0.3s;
	}
	
	.section-header {
		display: flex;
		justify-content: space-between;
		align-items: center;
		margin-bottom: 1.5rem;
		padding-bottom: 0.75rem;
		border-bottom: 1px solid var(--color-border);
		transition: border-color 0.3s;
	}

	h2 {
		font-size: 1.5rem;
		font-weight: 600;
		margin-bottom: 0;
		padding-bottom: 0;
		border-bottom: none;
		transition: color 0.3s;
	}
	
	/* --- NOTIFICATIONS & ALERTS --- */
	.notifications-panel, .error-display {
		border-radius: var(--border-radius);
		padding: 1rem 1.5rem;
		margin-bottom: 2rem;
		border-width: 1px;
		border-style: solid;
		transition: background-color 0.3s, border-color 0.3s;
	}
	.notifications-panel {
		background-color: var(--color-info-bg);
		border-color: var(--color-info);
		color: var(--color-info);
	}
	.notifications-panel ul {
		list-style-position: inside;
		padding-left: 0;
	}
	.notifications-panel h2 {
		border-bottom: none;
		margin-bottom: 0.5rem;
		color: var(--color-text-primary);
	}
	.notifications-panel li .text-red-700 { color: var(--color-danger); }
	.notifications-panel li .text-custom-green-teal { color: var(--color-warning); }
	.error-display {
		display: none;
		background-color: var(--color-danger-bg);
		border-color: var(--color-danger);
		color: var(--color-danger);
	}
	.notifications-panel li.clickable {
		cursor: pointer;
		border-radius: 0.375rem;
		transition: background-color 0.2s;
	}
	.notifications-panel li.clickable:hover {
		background-color: rgba(0,0,0,0.05);
	}
	[data-theme="dark"] .notifications-panel li.clickable:hover {
		 background-color: rgba(255,255,255,0.05);
	}
	
	.error-display.active { display: block; }
	
	/* --- Compliance Dashboard --- */
	.compliance-dashboard {
		padding-bottom: 1.5rem;
	}
	.dashboard-grid {
		display: grid;
		grid-template-columns: 1fr 2fr;
		gap: 2rem;
		align-items: center;
	}
	.donut-chart-container {
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
	}
	.donut-chart {
		width: 200px;
		height: 200px;
		border-radius: 50%;
		display: grid;
		place-items: center;
		position: relative;
		background: conic-gradient(var(--color-success) 0deg, var(--color-border) 0deg);
		transition: background 0.5s;
	}
	.donut-chart-center {
		width: 150px;
		height: 150px;
		background: var(--color-surface);
		border-radius: 50%;
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		text-align: center;
	}
	#donut-chart-percent {
		font-size: 2.5rem;
		font-weight: 700;
		color: var(--color-text-primary);
	}
	#donut-chart-label {
		font-size: 0.8rem;
		color: var(--color-text-secondary);
	}
	.donut-chart-ratio {
		margin-top: 1rem;
		font-weight: 600;
		color: var(--color-text-secondary);
	}
	.location-grid-container {
		width: 100%;
	}
	.sorting-controls {
		display: flex;
		justify-content: flex-end;
		align-items: center;
		gap: 0.5rem;
		margin-bottom: 1.5rem;
	}
	.sorting-controls span {
		font-size: 0.875rem;
		font-weight: 500;
		color: var(--color-text-secondary);
	}
	.sorting-controls button {
		background-color: var(--color-surface);
		color: var(--color-text-primary);
		border: 1px solid var(--color-border);
		padding: 0.35rem 0.75rem;
		font-size: 0.75rem;
	}
	.sorting-controls button:hover {
		background-color: var(--color-background);
	}
	.sorting-controls button.active {
		background-color: var(--color-primary);
		color: var(--color-text-white);
		border-color: var(--color-primary);
	}
	.location-progress-bars {
		display: grid;
		grid-template-columns: repeat(2, 1fr);
		gap: 1.5rem;
	}
	.progress-bar-container, .location-progress-bar {
		margin-bottom: 1rem;
		cursor: pointer;
	}
	.progress-bar-label {
		display: flex;
		justify-content: space-between;
		align-items: baseline;
		margin-bottom: 0.5rem;
		font-weight: 600;
		color: var(--color-text-secondary); /* Set the default color to grey */
	}
	.progress-bar-label span:first-child {
		color: var(--color-text-primary); /* Set the location name back to the primary color */
	}
	.progress-bar-label span:last-child {
		font-size: 1rem;
		/* This color is now inherited correctly from the parent */
	}
	.progress-bar {
		position: relative;
		width: 100%;
		height: 24px;
		background-color: var(--color-border);
		border-radius: var(--border-radius);
		overflow: hidden;
	}
	.progress-bar-inner {
		height: 100%;
		border-radius: var(--border-radius);
		transition: width 0.5s ease-in-out, background-color 0.5s ease-in-out;
	}
	.progress-bar-inner.status-high { background-color: var(--color-success); }
	.progress-bar-inner.status-medium { background-color: #FBBF24; }
	.progress-bar-inner.status-low { background-color: var(--color-danger); }
	.progress-bar-text {
		position: absolute;
		top: 50%;
		left: 10px;
		transform: translateY(-50%);
		font-size: 0.75rem;
		font-weight: 600;
		z-index: 2;
		color: var(--color-text-primary); /* Uses black in light mode, white in dark mode */
	}
	
	.status-medium + .progress-bar-text {
		color: var(--color-text-dark); /* Always use dark text on the yellow bar */
	}

	/* Responsive stacking for dashboard */
	@media (max-width: 992px) {
		.dashboard-grid {
			grid-template-columns: 1fr;
		}
		.location-progress-bars {
			grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
		}
	}
	
	 /* --- Compliance Details Modal --- */
	#complianceDetailsModal .modal-content {
		max-width: 900px;
	}
	#complianceDetailsModal .compliance-lists {
		display: grid;
		grid-template-columns: 1fr 1fr;
		gap: 2rem;
		margin-top: 1.5rem;
	}
	#complianceDetailsModal .compliance-list h3 {
		font-size: 1.1rem;
		font-weight: 600;
		margin-bottom: 1rem;
		padding-bottom: 0.5rem;
		border-bottom: 1px solid var(--color-border);
	}
	#complianceDetailsModal .compliance-list ul {
		list-style-type: none;
		padding-left: 0;
		max-height: 200px;
		overflow-y: auto;
	}
	#complianceDetailsModal .compliance-list li {
		padding: 0.5rem;
		border-radius: 0.25rem;
	}
	#complianceDetailsModal .compliance-list li:nth-child(odd) {
		background-color: var(--color-background);
	}
	#complianceDetailsModal .compliance-list li[data-doc-id],
	#complianceDetailsModal .compliance-list li[data-doc-name] {
		cursor: pointer;
		transition: background-color 0.2s;
	}
	#complianceDetailsModal .compliance-list li[data-doc-id]:hover,
	#complianceDetailsModal .compliance-list li[data-doc-name]:hover {
		background-color: var(--color-info-bg);
	}
	#complianceDetailsModal .compliance-sub-heading {
		font-size: 0.9rem;
		font-weight: 600;
		color: var(--color-text-secondary);
		margin-top: 1.5rem;
		margin-bottom: 0.5rem;
		padding-bottom: 0.25rem;
		border-bottom: 1px dashed var(--color-border);
	}
	#complianceDetailsModal .compliance-lists > .compliance-list:last-child {
		border-left: 1px solid var(--color-border);
		padding-left: 2rem;
	}

	/* Responsive stacking for the modal on smaller screens */
	@media (max-width: 768px) {
		#complianceDetailsModal .compliance-lists {
			grid-template-columns: 1fr;
			gap: 1rem;
		}
		#complianceDetailsModal .compliance-lists > .compliance-list:last-child {
			border-left: none;
			padding-left: 0;
			padding-top: 1.5rem;
			border-top: 1px solid var(--color-border);
		}
	}

	/* --- FORMS, BUTTONS, & INTERACTIVE ELEMENTS --- */
	.location-add-section {
		display: flex;
		flex-wrap: wrap;
		align-items: center;
		justify-content: space-between;
		gap: 1rem;
		padding: 1.5rem;
		border-radius: var(--border-radius);
		background-color: #F9FAFB; /* A slightly off-white */
		margin-bottom: 2rem;
		transition: background-color 0.3s;
	}
	[data-theme="dark"] .location-add-section {
		background-color: #1F2937;
	}
	.location-add-section .location-selector { flex-grow: 1; }

	label {
		display: block;
		font-weight: 500;
		font-size: 0.875rem;
		margin-bottom: 0.5rem;
		color: var(--color-text-primary);
		transition: color 0.3s;
	}

	select, input[type="text"], input[type="date"], input[type="file"], textarea {
		width: 100%;
		padding: 0.65rem 0.75rem;
		border: 1px solid var(--color-border);
		border-radius: 0.375rem;
		background-color: var(--color-surface);
		color: var(--color-text-primary);
		box-shadow: var(--shadow-sm);
		transition: border-color 0.2s, box-shadow 0.2s, background-color 0.3s, color 0.3s;
	}
	select:focus, input:focus {
		outline: none;
		border-color: var(--color-primary);
		box-shadow: 0 0 0 3px rgba(74, 85, 104, 0.2);
	}
	[data-theme="dark"] select:focus, [data-theme="dark"] input:focus {
		 box-shadow: 0 0 0 3px rgba(148, 163, 184, 0.2);
	}

	.action-buttons-group { display: flex; gap: 0.5rem; }

	button {
		padding: 0.65rem 1.5rem;
		border-radius: 0.375rem;
		border: none;
		font-weight: 600;
		font-size: 0.875rem;
		color: var(--color-text-white);
		cursor: pointer;
		transition: background-color 0.2s, transform 0.1s, box-shadow 0.2s;
		box-shadow: var(--shadow-sm);
	}
	button:hover { box-shadow: var(--shadow-md); transform: translateY(-1px); }
	button:active { transform: translateY(0); }
	button:disabled {
		background-color: #ccc !important;
		cursor: not-allowed;
		transform: none;
		box-shadow: none;
	}

	#addDocumentBtn, #generateReportBtn, #generateFullReportBtn { background-color: var(--color-primary); }
	#addDocumentBtn:hover, #generateReportBtn:hover, #generateFullReportBtn:hover { background-color: var(--color-primary-hover); }

	#renewDocumentBtn, #renew-confirm, #renew-confirm-form { background-color: var(--color-secondary); }
	#renewDocumentBtn:hover, #renew-confirm:not(:disabled):hover, #renew-confirm-form:hover { background-color: var(--color-secondary-hover); }
	
	#actionViewStatusBtn { background-color: var(--color-primary); }
	#actionViewStatusBtn:hover { background-color: var(--color-primary-hover); }

	#actionRenewBtn { background-color: var(--color-secondary); }
	#actionRenewBtn:hover { background-color: var(--color-secondary-hover); }
	
	/* This applies to all buttons with class "toggle-button" */
	.toggle-button {
		background-color: var(--color-text-secondary);
		font-size: 0.8rem;
		padding: 0.5rem 1rem;
		display: flex; /* Added for consistent internal layout */
		align-items: center; /* Added for consistent internal layout */
		gap: 0.5rem; /* Added for consistent internal layout */
	}

	/* Filter Controls */
	.filter-controls {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
		gap: 1.5rem;
		margin-bottom: 2rem;
	}
	.filter-group {
		display: flex;
		align-items: center;
		justify-content: center;
		gap: 1.5rem;
		background-color: #F9FAFB;
		padding: 1rem;
		border-radius: var(--border-radius);
		transition: background-color 0.3s;
	}
	[data-theme="dark"] .filter-group {
		background-color: #1F2937;
	}
	.filter-group label {
		display: flex;
		align-items: center;
		gap: 0.5rem;
		font-size: 0.875rem;
		cursor: pointer;
		margin-bottom: 0;
	}

	.text-filter-group {
		display: flex;
		gap: 1.5rem;
		background-color: #F9FAFB;
		padding: 1rem;
		border-radius: var(--border-radius);
		transition: background-color 0.3s;
	}
	[data-theme="dark"] .text-filter-group {
		background-color: #1F2937;
	}
	.text-filter-group input {
		flex-grow: 1;
	}

	/* --- TABLE STYLES --- */
	.table-container { 
		overflow-x: auto;
		max-height: 400px; /* Default max height for scroll */
		overflow-y: auto; /* Enable vertical scroll if content exceeds max-height */
		transition: opacity 0.3s ease, max-height 0.3s ease;
		opacity: 1;
	}
	.table-container.hidden {
		max-height: 0;
		opacity: 0;
		overflow: hidden;
	}
	
	.documents-table {
		width: 100%;
		border-collapse: collapse;
		text-align: left;
	}
	.documents-table th, .documents-table td {
		padding: 1rem 1.25rem;
		border-bottom: 1px solid var(--color-border);
		white-space: nowrap; /* Prevent wrapping for better horizontal visibility */
	}
	.documents-table th {
		font-size: 0.875rem; /* Increased font size */
		font-weight: 600;
		text-transform: uppercase;
		letter-spacing: 0.05em;
		color: var(--color-text-secondary);
		background-color: var(--color-table-header-bg);
		transition: color 0.3s, background-color 0.3s;
		position: sticky; /* Make headers sticky */
		top: 0; /* Stick to the top of the scroll container */
		z-index: 1; /* Ensure headers are above scrolling content */
	}
	.documents-table td {
		font-size: 0.875rem; /* Increased font size matching header */
	}
	.documents-table tbody tr:hover { background-color: var(--color-background); }
	.documents-table tbody tr.row-expired { background-color: #ffc7c7; }
	.documents-table tbody tr.row-expiring { background-color: #faf89d; }
	
	@keyframes row-highlight {
		from { background-color: var(--color-warning-bg); }
		to { background-color: transparent; }
	}
	.documents-table tbody tr.row-highlight {
		animation: row-highlight 2.5s ease-out forwards;
	}

	[data-theme="dark"] .documents-table tbody tr.row-expired { background-color: #5c1f1f; }
	[data-theme="dark"] .documents-table tbody tr.row-expiring { background-color: #6b661d; }
	
	/* Table Sorting Headers */
	.sort-header {
		cursor: pointer;
		user-select: none;
		position: relative;
	}
	.sort-icon {
		display: inline-block;
		width: 0.5rem;
		height: 0.5rem;
		margin-left: 0.5rem;
		border-left: 1px solid var(--color-text-secondary);
		border-bottom: 1px solid var(--color-text-secondary);
		transform: rotate(135deg);
		transition: transform 0.2s ease-in-out;
		opacity: 0.5;
	}
	.sort-header:hover .sort-icon { opacity: 1; }
	.sort-asc .sort-icon {
		transform: rotate(-45deg);
		opacity: 1;
	}
	.sort-desc .sort-icon {
		transform: rotate(135deg);
		opacity: 1;
	}

	/* Table Status Pills */
	.status-span {
		padding: 0.25rem 0.75rem;
		border-radius: 9999px;
		font-size: 0.75rem;
		font-weight: 600;
	}
	.status-span.success { background-color: var(--color-success-bg); color: var(--color-success); }
	.status-span.warning { background-color: var(--color-warning-bg); color: var(--color-warning); }
	.status-span.danger { background-color: var(--color-danger-bg); color: var(--color-danger); }

	/* Table Action Buttons */
	.actions-cell { display: flex; align-items: center; gap: 0.5rem; }
	.action-button {
		display: flex;
		padding: 0.5rem;
		border-radius: 9999px;
		color: var(--color-text-white);
	}
	.action-button svg { height: 1rem; width: 1rem; }
	.download-btn { background-color: var(--color-info); }
	.edit-button-icon { background-color: var(--color-text-secondary); }
	.delete-button-icon { background-color: var(--color-danger); }
	.attachment-indicator { 
		color: var(--color-text-secondary);
		cursor: pointer; /* Indicate it's clickable for preview */
	}
	.attachment-indicator svg {
		width: 1.2rem;
		height: 1.2rem;
	}

	/* --- MODAL STYLES --- */
	.modal-overlay {
		position: fixed;
		top: 0; left: 0;
		width: 100%; height: 100%;
		background-color: rgba(0, 0, 0, 0.5);
		display: none;
		align-items: center;
		justify-content: center;
		z-index: 100;
		opacity: 0;
		transition: opacity 0.3s ease;
	}
	.modal-overlay.active { display: flex; opacity: 1; }
	
	.modal-on-top {
		z-index: 101; /* Higher than the default 100 */
	}

	.modal-content {
		background-color: var(--color-surface);
		border-radius: var(--border-radius);
		box-shadow: var(--shadow-lg);
		padding: 2rem;
		width: 90%;
		max-width: 500px;
		position: relative;
		transform: scale(0.95);
		transition: transform 0.3s ease, background-color 0.3s;
	}
	.modal-overlay.active .modal-content { transform: scale(1); }

	.modal-title {
		border-bottom: none;
		padding-bottom: 0;
		margin-bottom: 2rem;
		text-align: center;
	}
	.modal-close-btn {
		position: absolute;
		top: 1rem; right: 1rem;
		background: none;
		border: none;
		font-size: 1.5rem;
		color: var(--color-text-secondary);
		cursor: pointer;
		transition: color 0.3s;
	}
	
	.modal-form .form-grid {
		display: grid;
		grid-template-columns: 1fr 1fr;
		gap: 1.5rem;
	}
	.modal-form .grid-span-2 { grid-column: span 2 / span 2; }
	.modal-form .flex-justify-between {
		display: flex;
		justify-content: flex-end;
		gap: 1rem;
		margin-top: 2rem;
		grid-column: span 2 / span 2;
	}
	.modal-form button[type="submit"] { background-color: var(--color-primary); }
	.modal-form button[type="button"] {
		background-color: var(--color-border);
		color: var(--color-text-primary);
	}
	.modal-form .text-red-500 { color: var(--color-danger); font-size: 0.8rem; }
	
	/* Utility */
	.hidden { display: none !important; }

	#deleteAttachmentBtn {
		background-color: var(--color-danger);
		color: #fff;
		font-size: 0.75rem;
		font-weight: 600;
		padding: 0.35rem 0.75rem;
		border-radius: 9999px;
		display: inline-flex;
		align-items: center;
		gap: 0.25rem;
		margin-top: 0.5rem;
		cursor: pointer;
	}
	#deleteAttachmentBtn svg {
		width: 0.9rem;
		height: 0.9rem;
	}
	#deleteAttachmentBtn:hover:not(:disabled) {
		background-color: var(--color-danger-hover);
	}
	
	/* Make delete button circular to match edit/download */
	.action-button.delete-button-icon {
		border-radius: 50%;
		width: 2.2rem;
		height: 2.2rem;
		display: inline-flex;
		align-items: center;
		justify-content: center;
		padding: 0;
	}
	.action-button.delete-button-icon svg {
		width: 1rem;
		height: 1rem;
	}

	/* Delete Attachment Buttons (Option C style: small red text + icon) */
	#deleteAttachmentBtn,
	#renewDeleteAttachmentBtn {
		background: none;
		border: none;
		color: var(--color-danger);
		font-size: 0.7rem;
		display: inline-flex;
		align-items: center;
		gap: 0.25rem;
		cursor: pointer;
		margin-left: 0.5rem;
	}
	#deleteAttachmentBtn svg,
	#renewDeleteAttachmentBtn svg {
		width: 0.8rem;
		height: 0.8rem;
	}
	#deleteAttachmentBtn:hover,
	#renewDeleteAttachmentBtn:hover {
		text-decoration: underline;
	}
	/* Disabled action buttons */
	

	/* --- About / Version Info Panel Styles --- */
	.collapsible-panel .section-header {
		cursor: pointer;
		user-select: none;
		display: flex;
		justify-content: space-between;
		align-items: center;
		padding-right: 1rem; /* For the arrow icon */
	}
	.collapsible-panel .section-header h2 {
		margin-bottom: 0;
	}
	.collapsible-panel .toggle-button svg {
		transition: transform 0.3s ease;
	}
	.collapsible-panel .toggle-button.rotated svg {
		transform: rotate(180deg);
	}
	.collapsible-content {
		overflow-y: hidden; 
		max-height: 0;
		transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
		opacity: 0;
	}
	.collapsible-content.expanded {
		max-height: 500px; /* Adjust as needed based on content height */
		overflow-y: auto; /* Enable scroll for expanded content */
		opacity: 1;
	}

	/* --- Timeline Table Styles --- */
	.timeline-table {
		width: 100%;
		border-collapse: collapse;
		margin-top: 1.5rem;
		position: relative;
	}

	.timeline-table::before {
		content: '';
		position: absolute;
		left: 50%; /* Center the line */
		top: 0;
		bottom: 0;
		width: 2px;
		background-color: var(--color-border);
		z-index: 0;
		transform: translateX(-50%);
	}

	.timeline-table th, .timeline-table td {
		padding: 0.8rem 1rem;
		border-bottom: 1px dashed var(--color-border); /* Dashed line for subtle separation */
	}
	.timeline-table tbody tr:last-child td {
		border-bottom: none;
	}

	.timeline-table th {
		text-align: center; /* Center headers */
		font-size: 0.9rem; /* Increased font size */
		font-weight: 600;
		text-transform: uppercase;
		letter-spacing: 0.05em;
		color: var(--color-text-secondary);
		background-color: var(--color-table-header-bg); /* Changed from transparent to solid background */
		position: sticky;
		top: 0;
		z-index: 2; /* Increased z-index to ensure it stays above the timeline circles */
	}
	.timeline-table td {
		font-size: 0.9rem; /* Increased font size matching header */
	}
	
	[data-theme="dark"] .timeline-table th {
		background-color: var(--color-table-header-bg); /* Ensure solid background in dark mode too */
	}


	.timeline-table td {
		vertical-align: top;
		position: relative;
	}
	
	.timeline-date-cell {
		font-weight: 600;
		color: var(--color-text-primary);
		width: 45%; /* Date on left */
		text-align: right;
		padding-right: 2rem;
	}

	.timeline-description-cell {
		width: 45%; /* Description on right */
		padding-left: 2rem;
		text-align: left;
	}

	.timeline-middle-cell {
		width: 10%;
		position: relative;
		text-align: center;
	}

	.timeline-circle {
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		width: 16px;
		height: 16px;
		background-color: var(--color-primary); /* Circle color */
		border-radius: 50%;
		border: 2px solid var(--color-surface); /* Border to stand out */
		z-index: 1; /* Keep z-index lower than sticky header */
		box-shadow: 0 0 0 2px var(--color-primary); /* Subtle glow */
	}
	
	[data-theme="dark"] .timeline-circle {
		border: 2px solid var(--color-background);
		box-shadow: 0 0 0 2px var(--color-secondary);
	}

	@media (max-width: 768px) {
		.timeline-table::before {
			left: 20px; /* Align timeline line to the left for mobile */
			transform: translateX(0);
		}
		.timeline-date-cell, .timeline-description-cell {
			width: auto;
			text-align: left;
			padding-left: 50px; /* Space for the timeline line and circles */
			padding-right: 0;
		}
		.timeline-middle-cell {
			display: none; /* Hide middle cell on mobile, use ::before on description */
		}
		.timeline-table td {
			display: block;
			width: 100%;
			box-sizing: border-box;
			border-bottom: none; /* No horizontal line between date/desc */
		}
		.timeline-table tr {
			display: block;
			margin-bottom: 1rem;
			border-bottom: 1px solid var(--color-border); /* Separator between entries */
		}
		.timeline-table tr:last-child {
			border-bottom: none;
		}

		.timeline-table td.timeline-description-cell::before {
			content: '';
			position: absolute;
			left: 15px; /* Adjust for padding and line */
			top: 15px;
			transform: translateY(-50%);
			width: 16px;
			height: 16px;
			background-color: var(--color-primary);
			border-radius: 50%;
			border: 2px solid var(--color-surface);
			z-index: 1;
			box-shadow: 0 0 0 2px var(--color-primary);
		}
		[data-theme="dark"] .timeline-table td.timeline-description-cell::before {
			border: 2px solid var(--color-background);
			box-shadow: 0 0 0 2px var(--color-secondary);
		}
		 .timeline-table td.timeline-date-cell {
			font-size: 0.9em;
			color: var(--color-text-secondary);
			margin-bottom: 0.25em;
		 }
	}

	/* --- Preview Modal Specific Styles --- */
	#previewModal .modal-content {
		max-width: 90%;
		width: 100%;
		height: 90%;
		padding: 1rem;
		display: flex;
		flex-direction: column;
		align-items: center;
	}

	#previewModal .modal-title {
		margin-bottom: 1rem;
		font-size: 1.25rem;
		border-bottom: 1px solid var(--color-border);
		padding-bottom: 0.5rem;
		width: 100%;
		text-align: center;
	}

	#previewContent {
		flex-grow: 1;
		width: 100%;
		display: flex;
		align-items: center;
		justify-content: center;
		overflow: hidden; /* Important for scaling */
		position: relative;
	}

	#previewContent iframe, #previewContent img {
		max-width: 100%;
		max-height: 100%;
		object-fit: contain;
		border: 1px solid var(--color-border);
		background-color: #f0f0f0;
		transition: transform 0.2s ease-in-out;
		transform-origin: center center;
	}

	#previewContent iframe {
		width: 100%;
		height: 100%;
	}

	#previewControls {
		margin-top: 1rem;
		display: flex;
		gap: 1rem;
		align-items: center;
	}

	#previewControls button {
		background-color: var(--color-secondary);
		color: var(--color-text-white);
		padding: 0.5rem 1rem;
		border-radius: 0.375rem;
		cursor: pointer;
		border: none;
		display: flex;
		align-items: center;
		gap: 0.5rem;
	}
	#previewControls button:hover {
		background-color: var(--color-secondary-hover);
	}
	.modal-footer {
		margin-top: 2rem;
		padding-top: 1.5rem;
		border-top: 1px solid var(--color-border);
		display: flex;
		justify-content: flex-end;
	}
	
	.agency-cell-flex {
		display: flex;
		flex-direction: column;
		align-items: flex-start;
		gap: 0.5rem;
		/* The following ensures vertical alignment is consistent with other cells */
		justify-content: center;
		padding-top: 0.75rem;
		padding-bottom: 0.75rem;
	}
	.renewal-status-button {
		background-color: var(--color-secondary);
		color: var(--color-text-white);
		border: none;
		border-radius: 9999px; /* Pill shape */
		padding: 0.25rem 0.75rem;
		font-size: 0.7rem;
		font-weight: 600;
		cursor: pointer;
		transition: background-color 0.2s;
	}
	.renewal-status-button:hover {
		background-color: var(--color-secondary-hover);
	}
	#statusLogModal .modal-content {
		max-width: 800px; /* Make the modal wider */
		height: 80%;
		max-height: 700px;
		display: flex;
		flex-direction: column;
	}
	.comment-history-container {
		flex-grow: 1; /* This makes the container take up available space */
		min-height: 150px; /* Ensures it has a minimum height */
		overflow-y: auto;
		border: 1px solid var(--color-border);
		border-radius: var(--border-radius);
		padding: 0.75rem;
		margin-bottom: 1.5rem;
		background-color: var(--color-background);
	}
	.comment-history-list {
		list-style-type: none;
		padding: 0;
		margin: 0;
	}
	.comment-history-list li {
		padding-bottom: 0.75rem;
		margin-bottom: 0.75rem;
		border-bottom: 1px dashed var(--color-border);
	}
	.comment-history-list li:last-child {
		border-bottom: none;
		margin-bottom: 0;
	}
	.comment-history-list .comment-meta {
		font-size: 0.75rem;
		font-weight: 600;
		color: var(--color-text-secondary);
		margin-bottom: 0.25rem;
	}
	.comment-history-list .comment-text {
		font-size: 0.875rem;
		white-space: pre-wrap;
	}
	#newCommentForm #newCommentText {
		height: 120px; /* Sets a generous, fixed height */
		resize: none;  /* Makes the field static and not draggable */
	}
	}
	.dashboard-grid {
		display: grid;
		grid-template-columns: 1fr 2fr;
		gap: 2rem;
		align-items: center;
	}
	.donut-chart-container {
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
	}
	.donut-chart {
		width: 200px;
		height: 200px;
		border-radius: 50%;
		display: grid;
		place-items: center;
		position: relative;
		background: conic-gradient(var(--color-success) 0deg, var(--color-border) 0deg);
		transition: background 0.5s;
	}
	.donut-chart-center {
		width: 150px;
		height: 150px;
		background: var(--color-surface);
		border-radius: 50%;
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		text-align: center;
	}
	 #donut-chart-percent {
		font-size: 2.5rem;
		font-weight: 700;
		color: var(--color-text-primary);
		text-shadow: 0 0 5px var(--color-surface); /* Adds a subtle glow for readability */
	}
	#donut-chart-label {
		font-size: 0.8rem;
		color: var(--color-text-secondary);
	}
	.donut-chart-ratio {
		margin-top: 1rem;
		font-weight: 600;
		color: var(--color-text-secondary);
	}

	/* Responsive stacking for dashboard */
	@media (max-width: 992px) {
		.dashboard-grid {
			grid-template-columns: 1fr;
		}
		.location-progress-bars {
			grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
		}
	}